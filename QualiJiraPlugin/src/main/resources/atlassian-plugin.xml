<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2">
  <plugin-info>
    <description>${project.description}</description>
    <version>${project.version}</version>
    <vendor name="${project.organization.name}" url="${project.organization.url}"/>
    <param name="plugin-icon">images/pluginIcon.png</param>
    <param name="plugin-logo">images/pluginLogo.png</param>
  </plugin-info>
  <!-- add our i18n resource -->
  <resource type="i18n" name="i18n" location="QualiJiraPlugin"/>
  <!-- add our web resources -->

  <servlet key="admin-servlet" class="com.quali.jira.adminui.AdminServlet">
    <url-pattern>/quali/admin</url-pattern>
  </servlet>
  <rest key="rest" path="/quali-admin" version="1.0">
    <description>Provides REST resources for the admin UI.</description>
  </rest>
  <web-item key="jira-menu-item" name="Quali Admin" section="system.admin/globalsettings" weight="10" application="jira">
    <description>Link to quali-admin page.</description>
    <label key="quali.admin.label" />
    <link linkId="quali-admin-link">/plugins/servlet/quali/admin</link>
  </web-item>
  <web-item key="qualirefapp-menu-item" name="Quali Admin" section="system.admin/general" weight="10" application="qualirefapp">
    <description>Link to quali-admin page.</description>
    <label key="quali.admin.label" />
    <link linkId="quali-admin-link">/plugins/servlet/quali/admin</link>
  </web-item>

  <web-resource key="QualiJiraPlugin-resources" name="QualiJiraPlugin Web Resources">
    <dependency>com.atlassian.auiplugin:ajs</dependency>
    <resource type="download" name="images/" location="/images"/>
    <context>QualiJiraPlugin</context>
  </web-resource>

  <web-item name="Open in Quali CloudShell" i18n-name-key="openin-quali-cloud-shell.name" key="openin-quali-cloud-shell" section="jira.issue.tools" weight="1000">
    <description key="openin-quali-cloud-shell.description">The Open in Quali CloudShell Plugin</description>
    <label key="openin-quali-cloud-shell.label"/>
    <link linkId="openin-quali-cloud-shell-link">/secure/OpenInQualiCloudShell.jspa?issueid=$issue.id&amp;amp;description=$issue.description</link>
    <icon width="64" height="32" url="images/qualiIcon.png"/>
  </web-item>
  <webwork1 key="cloud-shell-plugin" name="CloudShell Plugin" i18n-name-key="cloud-shell-plugin.name">
    <description key="cloud-shell-plugin.description">Plugin to open a CloudShell sandbox for a resource that is the subject of a Jira issue</description>
    <actions>
      <action name="com.quali.jira.webwork.OpenInQualiCloudShell" alias="OpenInQualiCloudShell">
        <view name="success">/templates/cloud-shell-plugin/openinqualicloudshell/success.vm</view>
      </action>
    </actions>
  </webwork1>
</atlassian-plugin>
