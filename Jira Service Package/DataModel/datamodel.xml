<?xml version="1.0" encoding="utf-8"?>
<DataModelInfo xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.qualisystems.com/ResourceManagement/DataModelSchema.xsd">
  <Attributes>
    <AttributeInfo Name="User" Type="String" DefaultValue="" Description="" IsReadOnly="false">
      <Rules>
        <Rule Name="Configuration" />
      </Rules>
    </AttributeInfo>
    <AttributeInfo Name="Password" Type="Password" DefaultValue="3M3u7nkDzxWb0aJ/IZYeWw==" Description="" IsReadOnly="false">
      <Rules>
        <Rule Name="Configuration" />
      </Rules>
    </AttributeInfo>
    <AttributeInfo Name="Endpoint URL Base" Type="String" DefaultValue="https://server:port" IsReadOnly="false">
      <Rules>
        <Rule Name="Configuration" />
        <Rule Name="Setting" />
      </Rules>
    </AttributeInfo>
    <AttributeInfo Name="Jira Project Name" Type="String" DefaultValue="" IsReadOnly="false">
      <Rules>
        <Rule Name="Configuration" />
        <Rule Name="Setting" />
      </Rules>
    </AttributeInfo>
    <AttributeInfo Name="Support Domain" Type="String" DefaultValue="Support" IsReadOnly="false">
      <Rules>
        <Rule Name="Configuration" />
        <Rule Name="Setting" />
      </Rules>
    </AttributeInfo>
    <AttributeInfo Name="Issue Type" Type="String" DefaultValue="Task" IsReadOnly="false">
      <Rules>
        <Rule Name="Configuration" />
        <Rule Name="Setting" />
      </Rules>
    </AttributeInfo>
    <!--<AttributeInfo Name="Ticket Queue" Type="String" DefaultValue="" IsReadOnly="false">-->
      <!--<Rules>-->
        <!--<Rule Name="Configuration" />-->
        <!--<Rule Name="Setting" />-->
      <!--</Rules>-->
    <!--</AttributeInfo>-->
    <!--<AttributeInfo Name="Live Status Error Regex" Type="String" DefaultValue="Error" IsReadOnly="false">-->
      <!--<Rules>-->
        <!--<Rule Name="Configuration" />-->
        <!--<Rule Name="Setting" />-->
      <!--</Rules>-->
    <!--</AttributeInfo>-->
  </Attributes>
  <ResourceFamilies>
    <ResourceFamily Name="Example Family" Description="" IsPowerSwitch="true" IsSearchable="true" ResourceType="Resource">
      <AttachedAttributes />
      <AttributeValues />
      <Models>
        <ResourceModel Name="Example Model" Description="" SupportsConcurrentCommands="false">
          <AttachedAttributes/>
          <AttributeValues/>
          <ParentModels />
          <Drivers/>
          <Scripts>
            <ScriptName>health_check</ScriptName>
          </Scripts>
        </ResourceModel>
      </Models>
      <Categories />
    </ResourceFamily>

    <ResourceFamily Name="Jira Services" Description="Temporary combination of Jira Error Handler Service and Jira Action Service" IsService="true" ServiceType="Regular">
      <AttachedAttributes />
      <AttributeValues />
      <Models>
        <ResourceModel Name="Jira Service" Description="Creates a Jira issue for any resource in the reservation with a live status matching the error pattern and moves the resource to a separate domain dedicated to support." SupportsConcurrentCommands="false">
          <AttachedAttributes>
            <AttachedAttribute Name="User" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Password" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Endpoint URL Base" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Jira Project Name" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Support Domain" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Issue Type" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <!--<AttachedAttribute Name="Ticket Queue" IsOverridable="true" IsLocal="true" UserInput="true">-->
              <!--<AllowedValues />-->
            <!--</AttachedAttribute>-->
            <!--<AttachedAttribute Name="Live Status Error Regex" IsOverridable="true" IsLocal="true" UserInput="true">-->
              <!--<AllowedValues />-->
            <!--</AttachedAttribute>-->
          </AttachedAttributes>
          <AttributeValues>
            <AttributeValue Name="User" Value="admin" />
            <AttributeValue Name="Password" Value="DxTbqlSgAVPmrDLlHvJrsA==" />
            <AttributeValue Name="Endpoint URL Base" Value="http://localhost:2990" />
            <AttributeValue Name="Jira Project Name" Value="" />
            <AttributeValue Name="Support Domain" Value="Support" />
            <AttributeValue Name="Issue Type" Value="Task" />
            <!--<AttributeValue Name="Ticket Queue" Value="" />-->
            <!--<AttributeValue Name="Live Status Error Regex" Value="Error" />-->
          </AttributeValues>
          <ParentModels />
          <Drivers />
          <Scripts>
            <ScriptName>jira_error_handler</ScriptName>
            <ScriptName>jira_close_issue</ScriptName>
            <ScriptName>jira_add_comment_to_issue</ScriptName>
          </Scripts>
        </ResourceModel>
      </Models>
      <Categories>
        <Category>SaaS</Category>
      </Categories>
    </ResourceFamily>


    <ResourceFamily Name="Error Handler Services" Description="Services that have an attached command with a name containing the string 'error_handler'. This function will be automatically called by the teardown script Error Handler Sandbox Teardown and will handle any errors it considers the reservation or its resources to have. For example it can check for certain text in the live status." IsService="true" ServiceType="Regular" IsAdminOnly="true">
      <AttachedAttributes />
      <AttributeValues />
      <Models>
        <ResourceModel Name="Jira Error Handler Service" Description="Creates a Jira issue for any resource in the reservation with a live status matching the error pattern and moves the resource to a separate domain dedicated to support." SupportsConcurrentCommands="false">
          <AttachedAttributes>
            <AttachedAttribute Name="User" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Password" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Endpoint URL Base" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Jira Project Name" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Support Domain" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <AttachedAttribute Name="Issue Type" IsOverridable="true" IsLocal="true" UserInput="true">
              <AllowedValues />
            </AttachedAttribute>
            <!--<AttachedAttribute Name="Ticket Queue" IsOverridable="true" IsLocal="true" UserInput="true">-->
              <!--<AllowedValues />-->
            <!--</AttachedAttribute>-->
            <!--<AttachedAttribute Name="Live Status Error Regex" IsOverridable="true" IsLocal="true" UserInput="true">-->
              <!--<AllowedValues />-->
            <!--</AttachedAttribute>-->
          </AttachedAttributes>
          <AttributeValues>
            <AttributeValue Name="User" Value="admin" />
            <AttributeValue Name="Password" Value="DxTbqlSgAVPmrDLlHvJrsA==" />
            <AttributeValue Name="Endpoint URL Base" Value="http://localhost:2990" />
            <AttributeValue Name="Jira Project Name" Value="" />
            <AttributeValue Name="Support Domain" Value="Support" />
            <AttributeValue Name="Issue Type" Value="Task" />
            <!--<AttributeValue Name="Ticket Queue" Value="" />-->
            <!--<AttributeValue Name="Live Status Error Regex" Value="Error" />-->
          </AttributeValues>
          <ParentModels />
          <Drivers />
          <Scripts>
            <ScriptName>jira_error_handler</ScriptName>
          </Scripts>
        </ResourceModel>
      </Models>
      <Categories>
        <Category>SaaS</Category>
      </Categories>
    </ResourceFamily>
  </ResourceFamilies>
  <DriverDescriptors>
    <DriverDescriptor Name="Python Setup &amp; Teardown" Description="This driver is used for running Python scripts in the environment setup and teardown. To use this driver, make sure you select a suitable setup and/or teardown script." DriverType="TestShellDriver" />
  </DriverDescriptors>
  <ScriptDescriptors>
    <ScriptDescriptor Name="health_check" Alias="Run Health Check" Description="Check if the device is online and functioning properly, and update the live status accordingly">
      <ScriptInputs/>
    </ScriptDescriptor>
    <ScriptDescriptor Name="jira_error_handler" Alias="Jira Error Handler">
      <ScriptInputs/>
    </ScriptDescriptor>
    <ScriptDescriptor Name="jira_close_issue" Alias="Close Jira Issue" Description="Close the issue with id given in the sandbox name">
      <ScriptInputs>
        <ScriptInput Name="comment" Description="Comment explaining the issue resolution." />
      </ScriptInputs>
    </ScriptDescriptor>
    <ScriptDescriptor Name="jira_add_comment_to_issue" Alias="Add Comment to Jira Issue" Description="Add a comment to an existing Jira issue that was created previously. The issue id is taken from the sandbox name.">
      <ScriptInputs>
        <!--<ScriptInput Name="Issue_ID" Description="ID or key of the issue to update, as returned from Create Jira Issue" />-->
        <ScriptInput Name="Comment" Description="Text of the comment to add to the issue" />
        <!--<ScriptInput Name="Additional_Fields_JSON" DefaultValue="" Description="Additional text to insert in the JSON request, e.g. &quot;visibility&quot;: {&quot;type&quot;: &quot;role&quot;,&quot;value&quot;: &quot;Administrators&quot;}" />-->
      </ScriptInputs>
    </ScriptDescriptor>
    <!--<ScriptDescriptor Name="Default Sandbox Teardown" CategoryName="Hidden Commands" Version="1.0.1.2 " Alias="Teardown script">-->
      <!--<ScriptInputs />-->
    <!--</ScriptDescriptor>-->
    <ScriptDescriptor Name="Health Check Sandbox Setup" CategoryName="Hidden Commands" Version="1.0.1.2 " Alias="Setup script">
      <ScriptInputs />
    </ScriptDescriptor>
    <ScriptDescriptor Name="Error Handler Sandbox Teardown" CategoryName="Hidden Commands" Version="1.0.1.2 " Alias="Teardown script">
      <ScriptInputs />
    </ScriptDescriptor>
    <ScriptDescriptor Name="Run Health Checks" CategoryName="" Version="1.0.1.2 " Alias="Run Health Checks">
      <ScriptInputs />
    </ScriptDescriptor>

    <!--<ScriptDescriptor Name="Default Sandbox Setup" CategoryName="Hidden Commands" Version="1.0.1.2 " Alias="Setup script">-->
      <!--<ScriptInputs />-->
    <!--</ScriptDescriptor>-->
  </ScriptDescriptors>
</DataModelInfo>